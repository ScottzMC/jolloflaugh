function mobileLayout(){var t=navigator.userAgent;(-1!=t.indexOf("Android")||-1!=t.indexOf("iPhone"))&&($("div.nav").children("a").css({height:"20px",paddingTop:"12px",paddingBottom:"8px"}),$("div.navSelect").children("a").css({height:"20px",paddingTop:"12px",paddingBottom:"8px"}),$("div.navGroup").children("a").css({height:"20px",paddingTop:"12px",paddingBottom:"8px"}))}Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.addMilliseconds=function(t){return this.setMilliseconds(this.getMilliseconds()+t),this},Date.prototype.addSeconds=function(t){return this.addMilliseconds(1e3*t)},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(t){var e=this,s=function(t){return 1==t.toString().length?"0"+t:t};return t?t.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(t){switch(t){case"hh":return s(e.getHours()<13?e.getHours():e.getHours()-12);case"h":return e.getHours()<13?e.getHours():e.getHours()-12;case"HH":return s(e.getHours());case"H":return e.getHours();case"mm":return s(e.getMinutes());case"m":return e.getMinutes();case"ss":return s(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return e.getFullYear();case"yy":return e.getFullYear().toString().substring(2,4);case"dddd":return e.getDayName();case"ddd":return e.getDayName(!0);case"dd":return s(e.getDate());case"d":return e.getDate().toString();case"MMMM":return e.getMonthName();case"MMM":return e.getMonthName(!0);case"MM":return s(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return e.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},function(t){t.fn.setTooltip=function(t){this[0]._title=t},t.fn.getTooltip=function(){return this[0]._title},t.fn.easyTooltip=function(e){var s;e=t.extend({xOffset:10,yOffset:25,tooltipId:"easyTooltip",clickRemove:!1,content:"",useElement:""},e);this.each(function(){this._title=this.title,this.title="",t(this).bind("mouseover",function(a){s=""!=e.content?e.content:this._title,""!=(s=""!=e.useElement?t("#"+e.useElement).html():s)&&null!=s&&(t("body").append("<div id='"+e.tooltipId+"'>"+s+"</div>"),t("#"+e.tooltipId).css("position","absolute").css("top",a.pageY-e.yOffset+"px").css("left",a.pageX+e.xOffset+"px").css("display","none").fadeIn("fast"))}),t(this).bind("mouseout",function(s){t("#"+e.tooltipId).remove()}),t(this).mousemove(function(s){t("#"+e.tooltipId).css("top",s.pageY-e.yOffset+"px").css("left",s.pageX+e.xOffset+"px")}),e.clickRemove&&t(this).mousedown(function(s){t("#"+e.tooltipId).remove()})})}}(jQuery),window.loader=function(){$.ajax({url:$.baseurl+"seatplan_ajax.php?mode=load"+$.ie+"&cPath="+$.cPath,dataType:"json",success:function(t){t.cart&&(t.cart.length>0&&void 0===$.timer&&($("div#ajax_status").slideDown(200),$.timer=setInterval(countdown,1e3)),0==t.cart.length&&"number"==typeof $.timer&&(clearInterval($.timer),delete $.timer,$("div#ajax_status").slideUp(200).empty(),count=$.lifetime),$.each(t.cart,function(t,e){$("li#s"+e).hasClass("s")&&($.cls=$("li#s"+e).attr("class").match(/(bl|rd|gr|or|fu|ye|sa|sb|te|th|pg)/gi),null!=$.cls&&$("li#s"+e).removeClass("s").removeClass($.cls.toString()).addClass("y").addClass(flip($.cls.toString())))})),t.lock&&$.each(t.lock,function(t,e){$("li#s"+e).unbind("click").removeClass("s").addClass("z")}),t.sold&&$.each(t.sold,function(t,e){$("li#s"+e).unbind("click").removeClass("s").removeClass("z").addClass("x")}),t.prev&&$.each(t.prev,function(t,e){$("li#s"+e).unbind("click").removeClass("x").addClass("o")}),t.shopping_box&&($("#box_ajaxCart").html(t.shopping_box),alert(lng.tooslow))}})},window.freeSeats=function(){$.ajax({url:$.baseurl+"seatplan_ajax.php?mode=free"+$.ie+"&cPath="+$.cPath,dataType:"json",success:function(t){t.free&&$.each(t.free,function(t,e){$("li#s"+e).hasClass("z")&&$("li#s"+e).removeClass("z").addClass("s")})}})},window.bindTriggers=function(){$(".sxy").bind("click",function(){if($.checked=[],$("input[name='cats_avail[]']:checked").each(function(){$.checked.push(parseInt($(this).val()))}),0===$.checked.length)return alert("No categories selected. Please do so"),void $(".step1").show();$.ajax({url:"seatplan_ajax.php",data:"mode=unblock_indiv"+$.ie+"&cPath="+$.checked+"&name="+this.title,dataType:"json",success:function(t){t.unblocked&&$.each(t.unblocked,function(t,e){$("li#s"+e).hasClass("sxy")&&($.cls=$("li#s"+e).attr("class").match(/(lb|dr|rg|ro|uf|ey|as|bs|et|ht|gp)/gi),null!=$.cls&&$("li#s"+e).removeClass("sd").removeClass("sxy").removeClass($.cls.toString()).addClass("s").addClass("klm").addClass(flip($.cls.toString())))})}})}),$(".s").bind("click",function(){return $(this).hasClass("klm")?($.checked=[],$("input[name='cats_avail[]']:checked").each(function(){$.checked.push(parseInt($(this).val()))}),0===$.checked.length?(alert("No categories selected. Please do so"),void $(".step1").show()):void $.ajax({url:"seatplan_ajax.php",data:"mode=block_indiv"+$.ie+"&cPath="+$.checked+"&name="+this.title,dataType:"json",success:function(t){t.blocked&&$.each(t.blocked,function(t,e){$("li#s"+e).hasClass("s")&&($.cls=$("li#s"+e).attr("class").match(/(bl|rd|gr|or|fu|ye|sa|sb|te|th|pg)/gi),null!=$.cls&&$("li#s"+e).removeClass("klm").removeClass("s").removeClass($.cls.toString()).addClass("sd").addClass(flip($.cls.toString())))})}})):$(this).hasClass("sd")?($.checked=[],$("input[name='cats_avail[]']:checked").each(function(){$.checked.push(parseInt($(this).val()))}),0===$.checked.length?(alert("No categories selected. Please do so"),void $(".step1").show()):void $.ajax({url:"seatplan_ajax.php",data:"mode=unblock_indiv"+$.ie+"&cPath="+$.checked+"&name="+this.title,dataType:"json",success:function(t){t.unblocked&&$.each(t.unblocked,function(t,e){$("li#s"+e).hasClass("sd")&&($.cls=$("li#s"+e).attr("class").match(/(lb|dr|rg|ro|uf|ey|as|bs|et|ht|gp)/gi),null!=$.cls&&$("li#s"+e).removeClass("sd").removeClass($.cls.toString()).addClass("s").addClass("klm").addClass(flip($.cls.toString())))})}})):($("div.ticket_discount").is(":hidden")||$("div#ticket_discount").fadeOut(),void($("div#indicator").hasClass("activity")||($("div#indicator").fadeIn(40,function(){$(this).addClass("activity")}),clearInterval($.tick),clearInterval($.free),$(this).attr("id")&&($.id=$(this).attr("id").replace(/s/,""),$.price=$(this).attr("data-rel").replace(/s/,""),$(this).hasClass("y")?1==$("li#s"+$.id).length&&($("li#s"+$.id).addClass("activity_off"),$.ajax({url:"seatplan_ajax.php",data:"mode=remove_seat"+$.ie+"&cPath="+$.cPath+"&products_id="+$.id,dataType:"json",success:function(){$.cls=$("li#s"+$.id).attr("class").match(/(lb|dr|rg|ro|uf|ey|as|bs|et|ht|gp)/gi),null!=$.cls&&$("li#s"+$.id).removeClass("y").removeClass($.cls.toString()).addClass("s").addClass(flip($.cls.toString())),$("div.ticket_id_"+$.id).fadeOut(400).remove(),updateTotals(),$("li#c"+$.id).effect("transfer",{to:$("li#s"+$.id)},120,function(){$("li#c"+$.id).fadeOut(400).remove(),updateTotals()}),$("div#indicator").fadeOut(200,function(){$(this).removeClass("activity")}),$("li#s"+$.id).removeClass("activity_off")}})):($("li#s"+$.id).addClass("activity_on"),$.ajax({url:"seatplan_ajax.php",data:"mode=add_seat"+$.ie+"&cPath="+$.cPath+"&products_id="+$.id+"&products_orig_price="+$.price,dataType:"json",success:function(t){if(t.denied?alert(lng.tooslow):t.max?alert(lng.toomany):$("li#s"+$.id).effect("transfer",{to:$(".navbar")},120,function(){$.title=$("li#s"+$.id)[0]._title.split(" - ",2),$.ticket_color=$("li#s"+$.id).attr("class").match(/(lb|dr|rg|ro|uf|ey|as|bs|et|ht|gp)/gi),$.html='<li id="c'+$.id+'" class="c '+flip($.ticket_color.toString())+'"><span class="cht">'+$.cht+'</span></br><span class="pn"><a class="product_cart_link" href="'+$.baseurl+"product_info.php?products_id="+$.id+'">'+$.title[0]+'</a></span><span class="cnt">1</span><div id="del'+$.id+'" style="font-size:16px;color:red;" class="bd fa fa-times"></div><span class="pp">'+$.title[1]+'</span><span class="res"  style="display:none">'+t.sum_res+"</span></li>",$("ul#ajax_cart").length&&$("ul#ajax_cart").append($.html),$.html='<div class="indiv_ticket ticket_id_'+$.id+'"><a class="dropdown-item" href="'+$.baseurl+"product_info.php?products_id="+$.id+'"> <span class="cnt">1</span> x <span class="pn">'+$.title[0]+'</span> <span class="pp disc_'+$.id+'" style="display:none">'+$.title[1]+"</span></a></div>",$(".ticket_list").length&&$(".ticket_list").append($.html),count=parseInt(t.remaining),updateTotals()}),t.discounts)if("none"!=t.discounts){for(var e="",s=0;s<t.discounts.length;s++)e+='<li data-choice_warning="'+t.discounts[s].choice_warning+'" data-sale_id="'+t.discounts[s].sale_id+'" id="'+t.discounts[s].discounted_price+'" class="xx '+t.granted+'">'+t.discounts[s].description+"</li>";e+='<li id="kill_discount" data-bs-dismiss="modal"><strong>X</strong> '+$.thank+"</li>",$("ul#discount").html(e),$("#discount_show_name").html(t.show_name),$("#discount_products_name").html(t.products_name),$("div#ticket_discount").fadeIn()}else e="",$("#discount_show_name").html("&nbsp;");$.cls=$("li#s"+$.id).attr("class").match(/(bl|rd|gr|or|fu|ye|sa|sb|te|th|pg)/gi),null==$.cls||t.max||$("li#s"+$.id).removeClass("s").removeClass($.cls.toString()).addClass("y").addClass(flip($.cls.toString())),$("div#indicator").fadeOut(200,function(){$(this).removeClass("activity")}),$("li#s"+$.id).removeClass("activity_on"),$(".fixed-cart").removeClass("hidden"),$(".fixed-cart").addClass("roving-cart"),"&nbsp;"!=$("#discount_show_name").html()&&$("#myModal").modal("show")}})),$.tick=setInterval("loader();",$.refresh),$.free=setInterval("freeSeats();",24*$.refresh)))))}),$("#ajax_cart").on("click",".bd",function(){return $.id=$(this).attr("id").replace("del",""),0!=$("li#s"+$.id).length?($("li#s"+$.id).trigger("click"),!1):($("div#indicator").fadeIn(40,function(){$(this).addClass("activity")}),void $.ajax({url:"seatplan_ajax.php",data:"mode=remove_seat"+$.ie+"&cPath="+$.cPath+"&products_id="+$.id,dataType:"json",success:function(){$("li#c"+$.id).effect("puff",200,function(){$("tr#p"+$.id).length>0&&$("tr#p"+$.id).fadeOut(400,function(){$(this).remove()}),$("li#c"+$.id).remove(),updateTotals()}),$("div#indicator").fadeOut(220,function(){$(this).removeClass("activity")}),0==$("ul#ajax_cart").children("li.c").length&&(clearInterval($.timer),$("div#ajax_status").slideUp(200).empty(),count=parseInt($.lifetime),delete $.timer)}}))}),$(".c").on("click",function(){$.id=$(this).attr("id").replace("c",""),1==$("li#s"+$.id).lengt&&$("li#s"+$.id).effect("pulsate",{times:2,mode:"show"},360)}),$("#discount").on("click",".xx",function(){return isNaN(parseInt($("input#qty").val()))&&$("input#qty").val("1"),$(this).attr("class")&&($the_id=$(this).attr("class").replace(/xx/,"")),$(this).attr("id")&&($the_price=1e3*$(this).attr("id")),$the_sale_id=$(this).attr("data-sale_id"),$.ajax({url:"seatplan_ajax.php",data:"mode=live_discount"+$.ie+"&products_id="+$the_id+"&discount_id="+$the_sale_id+"&quantity=1&cPath="+$.cPath+"&new_price="+$the_price,dataType:"json",success:function(t){$("ul#ajax_cart").length?t.granted&&($.html='<span class="cht">'+t.show_name+'</span></br><span class="pn">'+(t.ga_in_cart>1?t.ga_in_cart+" x ":"")+'<a class="product_cart_link" href="'+$.baseurl+"product_info.php?products_id="+t.granted+'">'+t.products_name+'</a></span><span class="cnt">'+t.ga_in_cart+'</span><div id="del'+t.granted+'" " style="font-size:16px;color:red;" class="bd fa fa-times"></div><span class="pp">'+lng.sym_left+(t.discount_price*t.ga_in_cart).toFixed(2)+lng.sym_right+"</span>",$("li#c"+t.granted).html($.html),$("div#ticket_discount").effect("transfer",{to:$("ul#ajax_cart")},120,function(){updateTotals()}),$("#myModal").modal("hide")):t.granted&&($.html=(t.discount_price*t.ga_in_cart).toFixed(2),$(".disc_"+t.granted).html($.html),$("div#ticket_discount").effect("transfer",{to:$(".navbar")},120,function(){updateTotals()}),$("#myModal").modal("hide"))}}),!1}),$("#discount").on("mouseout",".xx",function(){$("#discount_choice_text").html("")}),$("#discount").on("mouseover",".xx",function(){$("#discount_choice_text").html($(this).attr("data-choice_warning"))}),$("#kill_discount").on("click",function(){$("div#ticket_discount").fadeOut()}),1==$("input#qty").length&&$("input#qty").bind("keyup",function(){isNaN(parseInt($("input#qty").val()))&&$("input#qty").val("1"),$.qty=parseInt($("input#qty").val()),0!=product.discount_id?($.price=(product.saleMaker.sales[product.discount_id].price*$.qty).toFixed(2),$("span#totalProductsPrice").html(product.currency.symbolLeft+$.price+product.currency.symbolRight)):setTotalPrice()})},window.countdown=function(){$("div#ajax_status").html(lng.expiry+" "+(new Date).clearTime().addSeconds(parseInt(count)).toString("mm:ss")),count>0?($.pct=count/$.lifetime*100,$.col=$.pct>30?"Green":$.pct>20?"Orange":"Red",$("div#ajax_status").css({color:$.col}),count-=1):$.ajax({url:"seatplan_ajax.php",data:"mode=terminate"+$.ie+"&cPath="+$.cPath,dataType:"json",success:function(){clearInterval($.tick),clearInterval($.free),clearInterval($.timer),$("div#easyTooltip").length>0&&$("div#easyTooltip").fadeOut(0),$("ul#ajax_cart").html('<li class="timedout">'+lng.expired+"</li>"),$("div.clear").html('<div id="cleared">'+lng.cleared+"</div>"),$("span#total_price").html(lng.sym_left+"0.00"+lng.sym_right),$("span#total_seats").html("0 "+lng.seats),$("span#total_head_seats").html("0 "+lng.seats),$(".ticket_list").html(""),$("li#ticket_count span").html("0 "+lng.seats),$("div#ajax_status").slideUp(400),$("div#btnCheckOut").fadeOut(200),$("div#res_display").fadeOut(200)}})},window.flip=function(t){return st=t.split(""),rt=st.reverse(),rt.join("")},window.submitData=function(t){t=void 0!==t?"&voucher=true":"",isNaN(parseInt($("input#qty").val()))&&$("input#qty").val("1"),$.sym_left=product.currency.symbolLeft,$.sym_right=product.currency.symbolRight,$.ajax({url:"seatplan_ajax.php",data:"mode=ga"+$.ie+"&products_id="+parseInt(product.id)+"&discount_id="+parseInt(product.discount_id)+"&quantity="+parseInt($("input#qty").val())+"&cPath="+$.cPath+t,dataType:"json",success:function(e){var s=0;if(product.priceBreaks.enabled){var a=e.ga_in_cart;for(var i in obj=product.priceBreaks.prices,obj)t:if(Object.prototype.hasOwnProperty.call(obj,i)){var n=obj[i];if(i>a)break t;s=n}}if(void 0!==t)var c=1;else c=e.ga_in_cart;e.voucher?alert(lng.voucher):e.discount&&alert(lng.discount),e.max?alert(lng.toomany):e.granted&&($.price=0==product.discount_id?parseFloat($("#price").val()-s):product.saleMaker.sales[product.discount_id].price.toFixed(2),""==$.cht&&($.cht=e.products_name),0==$("li#c"+product.id).length?($.html='<span class="cht">'+$.cht+'</span></br><span class="pn">'+(c>1?e.ga_in_cart+" x ":"")+'<a href="'+$.baseurl+"product_info.php?products_id="+product.id+'">'+e.products_name+'</a></span><span class="cnt">'+c+'</span><div id="del'+product.id+'" class="bd"></div><span class="pp">'+$.sym_left+($.price*e.ga_in_cart).toFixed(2)+$.sym_right+"</span>",$("ul#ajax_cart").append('<li id="c'+product.id+'" class="c gr">'+$.html+"</li>")):($.html='<span class="cht">'+$.cht+'</span></br><span class="pn">'+(e.ga_in_cart>1?e.ga_in_cart+" x ":"")+'<a href="'+$.baseurl+"product_info.php?products_id="+product.id+'">'+e.products_name+'</a></span><span class="cnt">'+c+'</span><div id="del'+product.id+'" class="bd"></div><span class="pp">'+$.sym_left+($.price*e.ga_in_cart).toFixed(2)+$.sym_right+"</span>",$("li#c"+product.id).html($.html)),product.stock=e.ga_available_stock,void 0===$.timer&&($("div#ajax_status").slideDown(200),$.timer=setInterval(countdown,1e3)),updateTotals(),e.ticketlimit&&alert(lng.ticketlimit),e.GAticketlimit&&alert(lng.GAticketlimit))}})},window.updateTotals=function(){$("ul#ajax_cart").length?($.cnt=0,$.sum=0,$.each($("ul#ajax_cart").children("li"),function(){$.sum+=parseFloat($(this).children(".pp").html().replace(lng.sym_left+lng.sym_right,"").replace(",","")),$.cnt+=parseInt($(this).children(".cnt").html())}),$("span#total_price").html(lng.sym_left+$.sum.toFixed(2)+lng.sym_right),$("span#total_res_price").html(lng.sym_left+$.sum_res.toFixed(2)+lng.sym_right),$("span#total_seats").html(1==$.cnt?"1 "+lng.seat:$.cnt+" "+lng.seats),total_head_seats,$("li#ticket_count span").html(1==$.cnt?"1 "+lng.seat:$.cnt+" "+lng.seats),$("span#cart_subtotal").length>0&&($("span#cart_subtotal").html("&nbsp;"+lng.sym_left+$.sum.toFixed(2)+lng.sym_right),0==parseInt($.sum)&&$("span#discount_notice").length>0&&$("span#discount_notice").remove()),$("div#btnCheckOut").css($.cnt>0?{display:"block"}:{display:"none"})):($.cnt=0,$.sum=0,$.each($(".navbar").find(".cnt"),function(){$.cnt+=parseInt($(this).html())}),$.each($(".navbar").find(".pp"),function(){$.sum+=parseFloat($(this).html().replace(lng.sym_left+lng.sym_right,"").replace(",",""))}),$("span#total_seats").html(1==$.cnt?"1 "+lng.seat+" "+(lng.sym_left+$.sum.toFixed(2)+lng.sym_right):$.cnt+" "+lng.seats+" "+(lng.sym_left+$.sum.toFixed(2)+lng.sym_right)),$("span#total_head_seats").html(1==$.cnt?"1 "+lng.seat:$.cnt+" "+lng.seats),$("li#ticket_count span").html(1==$.cnt?"1 "+lng.seat:$.cnt+" "+lng.seats),$("span#cart_subtotal").length>0&&($("span#cart_subtotal").html("&nbsp;"+lng.sym_left+$.sum.toFixed(2)+lng.sym_right),0==parseInt($.sum)&&$("span#discount_notice").length>0&&$("span#discount_notice").remove()),$("div#btnCheckOut").css($.cnt>0?{display:"block"}:{display:"none"}))},window.bindInputQuantity=function(){$("input#qty").bind("keyup",function(){checkStock("")})},$.ie=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0?"_ie":"";var timer,running=!1,count=parseInt($.remaining);$(function(){mobileLayout(),bindTriggers(),void 0!==$.cPath&&0!=$.cPath?(loader(),1==$("div.seatplan").length&&($.tick=setInterval("loader();",$.refresh),$.free=setInterval("freeSeats();",24*$.refresh)),$.timeout&&0!=$.remaining&&($("div#ajax_status").fadeIn(0),$.timer=setInterval(countdown,1e3)),$("li.s").easyTooltip()):("object"==typeof product&&($.cPath=product.cPath,bindInputQuantity()),$.timeout&&0!=$.remaining&&($("div#ajax_status").fadeIn(0),$.timer=setInterval(countdown,1e3))),$("ul#ajax_cart").children("li.c").length>0&&$("div#btnCheckOut").fadeIn(0);$(window).scroll(function(){$(this).scrollTop()>0?($(".fixed-cart").addClass("roving-cart"),$("#cart-hide").removeClass("hidden")):($(".fixed-cart").removeClass("roving-cart"),$("#cart-hide").addClass("hidden"),$(".fixed-cart").removeClass("hidden"))}),$("#cart-hide").on("click",function(t){$(".fixed-cart").removeClass("roving-cart"),$(".fixed-cart").addClass("hidden")})});